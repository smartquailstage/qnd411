{% extends "admin/businessmodel/Sales/base.html" %}
{% load widget_tweaks %}
{% load static %}


{% block content %}

{% include 'admin/businessmodel/Sales/tools/detail-income/header_detail.html' %}



            <div id="wrapper">
                <!--content -->	
                <div class="content full-height">
                    <!--home-main_container-->	
                    <div class="home-main_container">
                        <!--follow-wrap-->
                    
                        <div class="full-height fl-wrap hidden-item">

                            <div class="results-card">
                                <!-- Pestañas -->
                                <div class="tabs">
                                    <button class="tab-button active" onclick="openTab(event, 'incomeInfo')"><i class="fa-regular fa-tag"></i><h3>Income Detail</h3> </button>
                                    <button class="tab-button" onclick="openTab(event, 'clientInfo')"><i class="fa-regular fa-address-card"></i><h3>Customers Detail</h3> </button>
                                    <button class="tab-button" onclick="openTab(event, 'purchaseInfo')"><i class="fa-solid fa-ticket"></i><h3>Purchase Detail</h3>  </button>
                                    <button class="tab-button" onclick="openTab(event, 'amountInfo')"><i class="fa-regular fa-money-bill-1"></i><h3>Amounts Detail</h3> </button>
                                </div>
                            
                                <!-- Contenido de las pestañas -->

                                <div id="incomeInfo" class="tab-content active">
                               
                                    <table class="info-table">
                                        <tbody>
                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-tag"></i> Income ID</th>
                                                <td class="info-value">{{ venta.id }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-calendar"></i> Income Date & Time</th>
                                                <td class="info-value">{{ venta.fecha|date:"d/m/Y" }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-user"></i> Income Gateway payment</th>
                                                <td class="info-value">Online </td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-regular fa-envelope"></i> Correo Electrónico</th>
                                                <td class="info-value">{{ venta.email }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-map-location-dot"></i> Income total value</th>
                                                <td class="info-value">{{ venta.address }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div> 

                                <div id="clientInfo" class="tab-content">
                               
                                    <table class="info-table">
                                        <tbody>

                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-user"></i> Nombre de Cliente</th>
                                                <td class="info-value">{{ venta.first_name }} {{ venta.last_name }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-regular fa-envelope"></i> Correo Electrónico</th>
                                                <td class="info-value">{{ venta.email }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-map-location-dot"></i> Dirección</th>
                                                <td class="info-value">{{ venta.address }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-mountain-city"></i> Ciudad</th>
                                                <td class="info-value">{{ venta.city }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name"><i class="fa-solid fa-phone"></i> Teléfono de contacto</th>
                                                <td class="info-value">{{ venta.phone }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            
                                <div id="purchaseInfo" class="tab-content">
                                   
                                    <table class="info-table">
                                        <thead>
                                            <tr>
                                                <th>Item</th>
                                                <th>Cantidad</th>
                                                <th>Costo Unitario</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in venta.items.all %}
                                            <tr>
                                                <td class="info-value">{{ item.product.nombre }}</td>
                                                <td class="info-value">{{ item.quantity }}</td>
                                                <td class="info-value">${{ item.price|floatformat:2 }}</td>
                                                <td class="info-value">${{ item.get_cost|floatformat:2 }}</td>
                                            </tr>
                                            {% empty %}
                                            <tr>
                                                <td colspan="4" class="info-value">No hay items en esta venta.</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            
                                <div id="amountInfo" class="tab-content">
                                  
                                    <table class="info-table">
                                        <tbody>
                                            <tr>
                                                <th class="info-name">Descuentos</th>
                                                <td class="info-value">$ {{ venta.descuentos|floatformat:2 }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name">Devoluciones</th>
                                                <td class="info-value">$ {{ venta.devoluciones|floatformat:2 }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name">Sub Total</th>
                                                <td class="info-value">$ {{ venta.Sub_total|floatformat:2 }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name">I.V.A. (%)</th>
                                                <td class="info-value">{{ venta.iva_porcentaje }} %</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name">Valor I.V.A.</th>
                                                <td class="info-value">$ {{ venta.Valor_Iva|floatformat:2 }}</td>
                                            </tr>
                                            <tr>
                                                <th class="info-name">Total a Pagar</th>
                                                <td class="info-value">$ {{ venta.total_a_pagar|floatformat:2 }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                        

                        </div>
                    </div>
                    <!--home-main_container end-->
                </div>
                <!--content end-->	
                <!--share-wrapper-->
                <div class="share-wrapper">
                    <div class="share-container fl-wrap  isShare"></div>
                </div>
                <!--share-wrapper end-->
            </div>
            <!-- wrapper end -->
            <!-- sidebar -->

            <div class="sb-overlay"></div>
            <div class="hiiden-sidebar-wrap outsb">
                <!-- sb-widget-wrap-->
                <div class="sb-widget-wrap fl-wrap">
                    <h3>LEAVE YOUR COMMENTS</h3>
                    <div class="sb-widget  fl-wrap">
                        <p> Let me know, what you think about my work. I will contact to you soon.  </p>
                        <div class="column-wrapper_item fl-wrap">
                            <div class="column-wrapper_text fl-wrap">
                                <div id="contact-form" class="fl-wrap">
                                    <div id="message"></div>
                                    <form action="#" method="POST" novalidate class="custom-form" action="php/contact.php" name="contactform" >
                                        <fieldset>
                                          
                                                {% csrf_token %}
                                                {% for hidden_field in form.hidden_fields %}
                                                  {{ hidden_field }}
                                                {% endfor %}
                                              
                                                {% if form.non_field_errors %}
                                                  <div class="alert alert-danger" role="alert">
                                                    {% for error in form.non_field_errors %}
                                                      {{ error }}
                                                    {% endfor %}
                                                  </div>
                                                {% endif %}
                                              
                                                {% for field in form.visible_fields %}
                                                  <div class="form-group">
                                                    {{ field.label_tag }}
                                              
                                                    {% if form.is_bound %}
                                                      {% if field.errors %}
                                                        {% render_field field class="form-control is-invalid" %}
                                                        {% for error in field.errors %}
                                                          <div class="invalid-feedback">
                                                            {{ error }}
                                                          </div>
                                                        {% endfor %}
                                                      {% else %}
                                                        {% render_field field class="form-control is-valid" %}
                                                      {% endif %}
                                                    {% else %}
                                                      {% render_field field class="form-control" %}
                                                    {% endif %}
                                              
                                                    {% if field.help_text %}
                                                      <small class="form-text text-muted" placeholder="Your Email">{{ field.help_text }}</small>
                                                    {% endif %}
                                                  </div>
                                                  
                                                {% endfor %}  
                                        </fieldset>
                                       
                                    </form> <button type="submit" id="subscribe-button" class="subscribe-button">Submit</button>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                </div>
                <!-- sb-widget-wrap end--> 
                <!-- sb-widget-wrap-->
                <div class="sb-widget-wrap fl-wrap">
                    <h3>I'm a Social</h3>
                    <div class="sb-widget    fl-wrap">
                        <div class="sidebar-social fl-wrap">
                            <ul>
                                <li><a href="https://api.whatsapp.com/send?phone=593984534954" target="_blank"><i class="fab fa-whatsapp"></i></a></li>
                                <li><a href="mailto:info@juansilvaphoto.com" target="_blank"><i class="fa fa-envelope"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- sb-widget-wrap end-->                                   
                <!-- sb-widget-wrap-->
                <div class="sb-widget-wrap fl-wrap">
                    <div class="sb-widget  fl-wrap">
                        <a href="#" target="_blank" class="twitt_btn fl-wrap">Follow Us</a>
                    </div>
                </div>
                {% include 'admin/businessmodel/Sales/footer.html' %}
                <!-- sb-widget-wrap end-->    
            </div>
           
<script>
    function togglePopup() {
    const popup = document.getElementById("filterPopup");
        popup.style.display = popup.style.display === "block" ? "none" : "block";
    }

    // Cerrar el popup si el usuario hace clic fuera de él
    window.onclick = function(event) {
        const popup = document.getElementById("filterPopup");
        if (event.target === popup) {
            popup.style.display = "none";
        }
    }


    function openTab(event, tabName) {
        var i, tabcontent, tabbuttons;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].classList.remove("active");
        }
        tabbuttons = document.getElementsByClassName("tab-button");
        for (i = 0; i < tabbuttons.length; i++) {
            tabbuttons[i].classList.remove("active");
        }
        document.getElementById(tabName).classList.add("active");
        event.currentTarget.classList.add("active");
    }





</script>
       
 {% endblock %}




