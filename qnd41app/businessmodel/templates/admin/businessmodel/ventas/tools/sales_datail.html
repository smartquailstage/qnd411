{% extends "admin/businessmodel/base.html" %}
{% load i18n static %}

{% block content %}
<link type="text/css" rel="stylesheet" href="{% static '/css/inicio.css' %}">

<div class="container">

    <div class="chart-container">
       

        <div class="carousel">
            <div class="carousel-item active">
                <img src="{% static 'img/test2.png' %}" alt="Imagen 2">
               
               
                   
                <div class="carousel-caption-2">
                    <div class="card" style="display: flex; align-items: flex-start;">
                        <div class="toolbar" style="flex: 1; margin-right: 20px;">
                            <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:admin_ventas_detail' venta_id=venta.id %}'">
                                <div class="tooltip-container">
                                    <i class="fa-solid fa-database"></i>
                                    <span class="tooltip-text">Base de datos de ventas.</span>
                                </div>
                            </button>
                            <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:admin_ventas_detail' venta_id=venta.id %}'">
                                <i class="fa-solid fa-info" aria-hidden="true"></i>
                            </button>
                            <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:admin_historial' venta_id=venta.id %}'">
                                <i class="fa-solid fa-list" aria-hidden="true"></i>
                            </button>
                            <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:metricas_ventas' venta_id=venta.id %}'">
                                <i class="fa-solid fa-chart-simple" aria-hidden="true"></i>
                            </button>
                            <button class="tab-button" onclick="openTab(event, 'estadisticas')">
                                <i class="fa-solid fa-chart-line" aria-hidden="true"></i>
                            </button>
                            <button class="tab-button" onclick="openTab(event, 'estadisticas')">
                                <i class="fa-solid fa-chart-pie" aria-hidden="true"></i>
                            </button>
                        </div>
                
                        <div class="results-card">
                            <div class="header-container">
                                <div class="header-content">
                                    <h4 class="header-title"><i class="fa-solid fa-tag"></i> Detalle de Venta: N.- {{ venta.id }}</h4>
                                   <p class="header-date"><i class="fa-regular fa-clock"></i>{{ venta.fecha|date:"d/m/Y" }} - {{ venta.hora|date:"H:i" }}</p> 
                                    <div>
                                        
                            
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Sección 1: Información del Cliente -->
                            <div class="info-section">
                                <h5>Información del Cliente</h5>
                                <table class="info-table">
                                    <tbody>
                                        <tr>
                                            <th class="info-name"><i class="fa-solid fa-user"></i> Nombre de Cliente</th>
                                            <td class="info-value">{{ venta.first_name }} {{ venta.last_name }}</td>
                                        </tr>
                                 
                                        <tr>
                                            <th class="info-name"> <i class="fa-regular fa-envelope"></i> Correo Electrónico</th>
                                            <td class="info-value">{{ venta.email }}</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name"> <i class="fa-solid fa-map-location-dot"></i> Dirección</th>
                                            <td class="info-value">{{ venta.address }}</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name"><i class="fa-solid fa-mountain-city"></i> Ciudad</th>
                                            <td class="info-value">{{ venta.city }}</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name"><i class="fa-solid fa-phone"></i> Telefono de contacto</th>
                                            <td class="info-value">{{ venta.phone }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            
                            
                            <!-- Sección 3: Información de los Montos de Venta -->
                            <div class="info-section">
                                <h5>Información de los Montos de Venta</h5>
                                <table class="info-table">
                                    <tbody>
                                        <tr>
                                            <th class="info-name">Descuentos</th>
                                            <td class="info-value">$ {{ venta.descuentos|floatformat:2 }}</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name">Devoluciones</th>
                                            <td class="info-value">$ {{ venta.devoluciones|floatformat:2 }}</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name">Sub Total</th>
                                            <td class="info-value">$ {{ venta.Sub_total|floatformat:2 }}</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name">I.V.A. (%)</th>
                                            <td class="info-value">{{ venta.iva_porcentaje }} %</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name">Valor I.V.A.</th>
                                            <td class="info-value">$ {{ venta.Valor_Iva|floatformat:2 }}</td>
                                        </tr>
                                        <tr>
                                            <th class="info-name">Total a Pagar</th>
                                            <td class="info-value">$ {{ venta.total_a_pagar|floatformat:2 }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            
                                <ul class="object-tools">
                                    <li>
                                        <a href="{% url 'businessmodel:admin_comprobante_pdf' venta_id=venta.id %}">Imprimir</a>
                                    </li>
                                </ul>
                            
                            </div>
                            
                            </div>
                    </div>
                </div>
                
             
                




            </div>

            <div class="carousel-item ">
                <div class="toolbar">
              
               
                    <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:admin_ventas_detail' venta_id=venta.id %}'">
                        <div class="tooltip-container">
                        <i class="fa-solid fa-database"></i>
                        <span class="tooltip-text">
                               Base de datos de ventas.
                        </span>
                    </div>
                  
                       
                    </button>
                    <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:admin_ventas_detail' venta_id=venta.id %}'">
                        <i class="fa-solid fa-info" aria-hidden="true"></i>
             
                    </button>
                    <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:admin_historial' venta_id=venta.id %}'">
                        <i class="fa-solid fa-list" aria-hidden="true"></i>
                       
                    </button>
                    <button class="tab-button" onclick="window.location.href='{% url 'businessmodel:metricas_ventas' venta_id=venta.id %}'">
                        <i class="fa-solid fa-chart-simple" aria-hidden="true"></i>
                     
                    </button>
                    <button class="tab-button" onclick="openTab(event, 'estadisticas')">
                        <i class="fa-solid fa-chart-line" aria-hidden="true"></i>
               
                    </button>
                    <button class="tab-button" onclick="openTab(event, 'estadisticas')">
                        <i class="fa-solid fa-chart-pie" aria-hidden="true"></i>
                    
                    </button>
                </div>
                    <img src="{% static '/img/test2.png' %}" alt="Imagen 1">
                   
                    <div class="carousel-caption-2">
                        <h1 style="color: #ffff;">
                        Historial de ventas
                        </h1>
                    
                    </div>



            </div>

           


        </div>
        <div class="carousel-dots">
            <span class="dot active" onclick="currentSlide(0)"></span>
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
        </div>
   
    </div>

</div>

<script>
let currentIndex = 0;
const slides = document.querySelectorAll('.carousel-item');
const dots = document.querySelectorAll('.dot');

// Variables para el deslizamiento
let startX;
let endX;

function showSlide(index) {
    slides.forEach((slide, i) => {
        slide.classList.remove('active');
        dots[i].classList.remove('active');
    });
    slides[index].classList.add('active');
    dots[index].classList.add('active');
}

function nextSlide() {
    currentIndex = (currentIndex + 1) % slides.length;
    showSlide(currentIndex);
}

function previousSlide() {
    currentIndex = (currentIndex - 1 + slides.length) % slides.length; // Cálculo circular
    showSlide(currentIndex);
}

function currentSlide(index) {
    currentIndex = index;
    showSlide(currentIndex);
}

// Cambia de imagen automáticamente cada 60 segundos
setInterval(nextSlide, 60000); // 60000 ms = 1 minuto

// Muestra la primera imagen al cargar
showSlide(currentIndex);

// Manejo de deslizamiento táctil
const carousel = document.querySelector('.carousel');

carousel.addEventListener('touchstart', (event) => {
    startX = event.touches[0].clientX; // Captura la posición inicial del toque
});

carousel.addEventListener('touchend', (event) => {
    endX = event.changedTouches[0].clientX; // Captura la posición final del toque
    handleSwipe();
});

function handleSwipe() {
    const threshold = 50; // Umbral de deslizamiento
    if (startX - endX > threshold) {
        // Deslizar hacia la izquierda
        nextSlide();
    } else if (endX - startX > threshold) {
        // Deslizar hacia la derecha
        previousSlide();
    }
}


</script>
<script type="text/javascript" src="{% static 'js/tools.js' %}"></script>
{% endblock %}
